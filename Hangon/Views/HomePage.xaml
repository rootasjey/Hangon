<Page
    x:Class="Hangon.Views.HomePage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:animations="using:Microsoft.Toolkit.Uwp.UI.Animations"
    xmlns:controls="using:Microsoft.Toolkit.Uwp.UI.Controls"
    xmlns:data="using:Hangon.Models"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <!-- Loading -->
        <Grid x:Name="LoadingView" 
              VerticalAlignment="Center" 
              HorizontalAlignment="Center"
              Visibility="Collapsed">
            <Grid.RowDefinitions>
                <RowDefinition Height="20"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            <ProgressBar x:Name="ProgressPage" IsIndeterminate="True"/>
            <TextBlock Text="Loading photos from Unsplash..." FontSize="20" Grid.Row="1"/>
        </Grid>

        <StackPanel x:Name="EmptyView"
              Visibility="Collapsed"
              VerticalAlignment="Center"
              HorizontalAlignment="Center">
            <TextBlock Text="Sorry, I couldn't get data from Unsplash :("
                       FontSize="20"
                       TextWrapping="Wrap"/>
            <Button x:Name="ButtonTryAgain" Content="try again" 
                    Margin="0,20"
                    HorizontalAlignment="Center"/>
        </StackPanel>
        
        <!-- Data -->
        <controls:AdaptiveGridView x:Name="RecentView"
                                   DesiredWidth="300"
                                   ItemHeight="300"
                                   animations:ReorderGridAnimation.Duration="300">
            <GridView.ItemTemplate>
                <DataTemplate x:DataType="data:Photo">
                    <StackPanel x:Name="WallItem"
                                Opacity="0" 
                                Tapped="PhotoItem_Tapped"
                                Loaded="PhotoItem_Loaded">
                        
                        <controls:DropShadowPanel BlurRadius="10"
                                                ShadowOpacity="0"
                                                OffsetX="10"
                                                OffsetY="10"
                                                Color="Black"
                                                VerticalAlignment="Center"
                                                HorizontalAlignment="Center"
                                                PointerEntered="ShadowPanel_PointerEntered"
                                                PointerExited="ShadowPanel_PointerExited">
                            
                        <Border Width="300">
                            <Border.Clip>
                                <RectangleGeometry Rect="0,0, 300, 300"/>
                            </Border.Clip>
                            
                            <Image x:Name="PhotoImage"
                                   Stretch="UniformToFill"
                                   Height="300"
                                   Width="300"
                                   PointerEntered="Image_PointerEntered"
                                   PointerExited="Image_PointerExited">
                                <Image.Source>
                                    <BitmapImage DecodePixelWidth="300" UriSource="{x:Bind Urls.Regular}"/>
                                </Image.Source>
                            </Image>
                        </Border>
                        <!--<TextBlock Foreground="Black" Text="{Binding Title}" Height="100"/>-->
                        </controls:DropShadowPanel>
                    </StackPanel>
                </DataTemplate>
            </GridView.ItemTemplate>
        </controls:AdaptiveGridView>

        <CommandBar x:Name="ApplicationBar"
                    VerticalAlignment="Bottom"
                    ClosedDisplayMode="Minimal">
            <AppBarButton x:Name="CmdRefresh" Label="refresh" Icon="Refresh" Tapped="CmdRefresh_Tapped"/>
            <CommandBar.SecondaryCommands>
                <AppBarButton x:Name="CmdSettings" Label="settings" Tapped="CmdSettings_Tapped"/>
            </CommandBar.SecondaryCommands>
        </CommandBar>
    </Grid>
</Page>
